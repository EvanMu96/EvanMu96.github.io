<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Komoriii</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Komoriii">
<meta property="og:url" content="http://blog.senevan.com/index.html">
<meta property="og:site_name" content="Komoriii">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Komoriii">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Komoriii" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Komoriii</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/About-Me">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.senevan.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2021-03-21" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/21/2021-03-21/" class="article-date">
  <time class="dt-published" datetime="2021-03-20T22:05:26.000Z" itemprop="datePublished">2021-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/21/2021-03-21/">[转载归档]2020年最危险的软件缺陷</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="CVE-和-CWE"><a href="#CVE-和-CWE" class="headerlink" title="CVE 和 CWE"></a>CVE 和 CWE</h2><p>了解过信息安全的同学应该对 CVE 有印象，CVE 是通用漏洞披露 Common Vulnerabilities and Exposures 的是缩写，主要为了记录和共享各种计算机系统的安全漏洞，以方便其他用到同样系统的人了解其风险并修复。每个 CVE 都有一个 CVE 编号，比如 2017 年最让人头疼的 Windows 勒索软件就关联到了 CVE-2017-0143 和 CVE-201-0148 两条数据。对于信息安全人员和开发者，关注 CVE 是一种比较有时效性的学习方式，能够帮助我们了解最新的系统风险，避开有风险的底层技术。<br>CWE 与 CVE 不同，CWE 的全名是通用缺陷列表 Common Weakness Enumeration，CWE 提炼了众多信息安全事件中长常发生漏洞的点，进行分类归纳，供开发者避免在编程中再次出现。举几个 CWE 的例子，CWE-798 Use of Hard-coded Credentials （在代码中硬编码密码留下后门），CWE-476 NULL Pointer Dereference （空指针解引用）。这些条目对与代码审计有着非常好的参考价值，在开发静态检查工具的时候可以对照其中的条目进行开发。</p>
<h2 id="CWE-评选的-2020-年最危险的软件缺陷"><a href="#CWE-评选的-2020-年最危险的软件缺陷" class="headerlink" title="CWE 评选的 2020 年最危险的软件缺陷"></a>CWE 评选的 2020 年最危险的软件缺陷</h2><p>2020年8月，CWE 官网发布了 2020 年最危险的软件缺陷的 Top 25。其数据来源为美国政府主导简历的 NVD （National Vulnerbility Database），NVD 的缺陷数据来自 CVE 并且补充了其对应到 CWE 的缺陷类型，以及用来衡量缺陷带来的问题严重性的 CVSS 评分；数据取样时只提取了 2018/ 2019 年的数据，一共有 27,000 条对应的 CVE。讲 2700 条 CVE 数据对应到更少的 CVW 中。然后综合考量严重性（CVSS）和产生的频率得到最终的评分（表格中的score），具体的评分计算细节请访问其官网查看。 统计结果如下表。</p>
<table id="Detail" style="margin-left:auto; margin-right:auto;" border="2" cellpadding="2" cellspacing="2"><thead><tr><th width="60px">Rank</th><th width="90px">ID</th><th>Name</th><th width="80px">Score</th></tr></thead>
<tr><td style="text-align:center;"><b>[1]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/79.html">CWE-79</a></td><td>Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')</td><td style="text-align:center;">46.82</td></tr>
<tr><td style="text-align:center;"><b>[2]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/787.html">CWE-787</a></td><td>Out-of-bounds Write</td><td style="text-align:center;">46.17</td></tr>
<tr><td style="text-align:center;"><b>[3]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/20.html">CWE-20</a></td><td>Improper Input Validation</td><td style="text-align:center;">33.47</td></tr>
<tr><td style="text-align:center;"><b>[4]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/125.html">CWE-125</a></td><td>Out-of-bounds Read</td><td style="text-align:center;">26.50</td></tr>
<tr><td style="text-align:center;"><b>[5]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/119.html">CWE-119</a></td><td>Improper Restriction of Operations within the Bounds of a Memory Buffer</td><td style="text-align:center;">23.73</td></tr>
<tr><td style="text-align:center;"><b>[6]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/89.html">CWE-89</a></td><td>Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')</td><td style="text-align:center;">20.69</td></tr>
<tr><td style="text-align:center;"><b>[7]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/200.html">CWE-200</a></td><td>Exposure of Sensitive Information to an Unauthorized Actor</td><td style="text-align:center;">19.16</td></tr>
<tr><td style="text-align:center;"><b>[8]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/416.html">CWE-416</a></td><td>Use After Free</td><td style="text-align:center;">18.87</td></tr>
<tr><td style="text-align:center;"><b>[9]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/352.html">CWE-352</a></td><td>Cross-Site Request Forgery (CSRF)</td><td style="text-align:center;">17.29</td></tr>
<tr><td style="text-align:center;"><b>[10]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/78.html">CWE-78</a></td><td>Improper Neutralization of Special Elements used in an OS Command ('OS Command Injection')</td><td style="text-align:center;">16.44</td></tr>
<tr><td style="text-align:center;"><b>[11]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/190.html">CWE-190</a></td><td>Integer Overflow or Wraparound</td><td style="text-align:center;">15.81</td></tr>
<tr><td style="text-align:center;"><b>[12]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/22.html">CWE-22</a></td><td>Improper Limitation of a Pathname to a Restricted Directory ('Path Traversal')</td><td style="text-align:center;">13.67</td></tr>
<tr><td style="text-align:center;"><b>[13]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/476.html">CWE-476</a></td><td>NULL Pointer Dereference</td><td style="text-align:center;">8.35</td></tr>
<tr><td style="text-align:center;"><b>[14]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/287.html">CWE-287</a></td><td>Improper Authentication</td><td style="text-align:center;">8.17</td></tr>
<tr><td style="text-align:center;"><b>[15]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/434.html">CWE-434</a></td><td>Unrestricted Upload of File with Dangerous Type</td><td style="text-align:center;">7.38</td></tr>
<tr><td style="text-align:center;"><b>[16]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/732.html">CWE-732</a></td><td>Incorrect Permission Assignment for Critical Resource</td><td style="text-align:center;">6.95</td></tr>
<tr><td style="text-align:center;"><b>[17]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/94.html">CWE-94</a></td><td>Improper Control of Generation of Code ('Code Injection')</td><td style="text-align:center;">6.53</td></tr>
<tr><td style="text-align:center;"><b>[18]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/522.html">CWE-522</a></td><td>Insufficiently Protected Credentials</td><td style="text-align:center;">5.49</td></tr>
<tr><td style="text-align:center;"><b>[19]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/611.html">CWE-611</a></td><td>Improper Restriction of XML External Entity Reference</td><td style="text-align:center;">5.33</td></tr>
<tr><td style="text-align:center;"><b>[20]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/798.html">CWE-798</a></td><td>Use of Hard-coded Credentials</td><td style="text-align:center;">5.19</td></tr>
<tr><td style="text-align:center;"><b>[21]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/502.html">CWE-502</a></td><td>Deserialization of Untrusted Data</td><td style="text-align:center;">4.93</td></tr>
<tr><td style="text-align:center;"><b>[22]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/269.html">CWE-269</a></td><td>Improper Privilege Management</td><td style="text-align:center;">4.87</td></tr>
<tr><td style="text-align:center;"><b>[23]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/400.html">CWE-400</a></td><td>Uncontrolled Resource Consumption</td><td style="text-align:center;">4.14</td></tr>
<tr><td style="text-align:center;"><b>[24]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/306.html">CWE-306</a></td><td>Missing Authentication for Critical Function</td><td style="text-align:center;">3.85</td></tr>
<tr><td style="text-align:center;"><b>[25]</b></td><td style="text-align:left;"><a target="_blank" rel="noopener noreferrer" href="/data/definitions/862.html">CWE-862</a></td><td>Missing Authorization</td><td style="text-align:center;">3.77</td></tr>
      </table>  

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.redhat.com/zh/topics/security/what-is-cve">https://www.redhat.com/zh/topics/security/what-is-cve</a><br><a target="_blank" rel="noopener" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0143">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0143</a><br><a target="_blank" rel="noopener" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0148">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0148</a><br><a target="_blank" rel="noopener" href="https://cwe.mitre.org/top25/archive/2020/2020_cwe_top25.html">https://cwe.mitre.org/top25/archive/2020/2020_cwe_top25.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2021/03/21/2021-03-21/" data-id="ckmivlo2f0011f8og602z3mb8" data-title="[转载归档]2020年最危险的软件缺陷" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CWE-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%EF%BC%8C%E8%BD%AC%E8%BD%BD/" rel="tag">CWE, 软件开发，转载</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2021-02-26" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/26/2021-02-26/" class="article-date">
  <time class="dt-published" datetime="2021-02-26T02:10:31.000Z" itemprop="datePublished">2021-02-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/26/2021-02-26/">[开发环境]切换到vcpkg</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>过去看到 laike9m 的博客讲到他喜欢的编程语言，其中共鸣很深的一点是</p>
<blockquote>
<p>Python is my favourite language, whose simplicity and powerfulness fascinates me. C++ is great, but writing C++ code is of less fun.</p>
</blockquote>
<p>对于没有什么性能指标的个人项目我是很喜欢用 Python 写的，同时在工作中写游戏服务器也大量用到 C++，每次想用 C++ 写一个个人项目时我就开始想 ”啊，又要一个 CMake 搞一下午了“ ，然后放弃。</p>
<p>最近几年微软的开源产品的质量有了很大的提升，然后在了解到 vcpkg 可以兼容 CMake 之后决定把整个 C++ 工作环境迁移到 vcpkg 上。这篇文章用于积累我常用的 vcpkg 命令。</p>
<h2 id="我的-C-工作环境"><a href="#我的-C-工作环境" class="headerlink" title="我的 C++ 工作环境"></a>我的 C++ 工作环境</h2><p>Windows : MSBuild/ CMake </p>
<p>Linux/ MacOS: CMake</p>
<p>所以我选择干脆把三台机器都装上 vcpkg。</p>
<h2 id="简单的使用"><a href="#简单的使用" class="headerlink" title="简单的使用"></a>简单的使用</h2><p>场景：我想要写一些简单的 OpenGL 程序，需要用到的库大概有 glfw（动态或者静态库），glew（静态链接）另外我想用一个简单的日志库所以选择 spdlog。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/microsoft/vcpkg</span><br><span class="line"><span class="comment"># for windows</span></span><br><span class="line"><span class="comment"># bootstrap-vcpkg.bat</span></span><br><span class="line">sh bootstrap-vcpkg.sh</span><br></pre></td></tr></table></figure>

<p>由于 vcpkg 完全托管在 GitHub 上的，更新的话只需要 pull 一下最新的代码就好了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> vcpkg &amp;&amp; git pull</span><br></pre></td></tr></table></figure>

<p>查找以及安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vcpkg search gl <span class="comment"># 可以搜很多很多到 OpenGL 和依赖到 OpenGL 的库</span></span><br><span class="line">vcpkg install glfw3 spdlog <span class="comment"># install with dynamic link</span></span><br><span class="line">vcpkg install glew:x86-windows-static <span class="comment"># install with static lib</span></span><br></pre></td></tr></table></figure>

<p>如果使用的时 Visual Studio，一个命令就可以直接集成到开发环境中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\vcpkg\vcpkg integrate install</span><br></pre></td></tr></table></figure>

<p>而如果使用 cmake，现在可以放心地在 CMakeLists.txt 里写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">find_package(glfw3 CONFIG REQUIRED)</span><br><span class="line">target_link_libraries(main PRIVATE glfw)</span><br><span class="line"> </span><br><span class="line">find_package(spdlog CONFIG REQUIRED)</span><br><span class="line">target_link_libraries(main PRIVATE spdlog::spdlog spdlog::spdlog_header_only)</span><br><span class="line"></span><br><span class="line">find_package(GLEW REQUIRED)</span><br><span class="line">target_link_libraries(main PRIVATE GLEW::GLEW)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后生成时引入 vcpkg 的 toolchain file 就能够正常的找到依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake .. -DCMAKE_TOOLCHAIN_FILE=.../vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x86-windows-static</span><br></pre></td></tr></table></figure>

<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>今天听 CppCast 正好听到了邀请 vcpkg 开发成员 Nicholas 的一期节目，Nicholas 提到他们希望 vcpkg 成为 C++ 生态中的 cargo（顺便黑了一把 Google 的 bazel。总体而言，如果微软能够延续 Visual Studio Code/ Windows Terminal/ winapi-rs 的这种对于开源的热情，未来肯定会从 Mac 生态中吸引来更多的开发者用户。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2021/02/26/2021-02-26/" data-id="ckmivlo2d000zf8ogg2l19yba" data-title="[开发环境]切换到vcpkg" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-vcpkg-Notes/" rel="tag">C++, vcpkg, Notes</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2021-02-23" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/23/2021-02-23/" class="article-date">
  <time class="dt-published" datetime="2021-02-23T08:53:10.000Z" itemprop="datePublished">2021-02-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/23/2021-02-23/">[编程随记]CPython 中的小整数池的实现</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="什么是小整数池"><a href="#什么是小整数池" class="headerlink" title="什么是小整数池"></a>什么是小整数池</h2><p>在写 Python 的时候小整数池的存在会给我们带来意想不到的结果。比如。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    cls_var = <span class="number">42</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 如果这里是整数类型就会出现两个local_var都指向integer pool里的int类型对象了</span></span><br><span class="line">        self.local_var = <span class="number">42</span></span><br><span class="line">a = Foo()</span><br><span class="line">b = Foo()</span><br><span class="line"><span class="built_in">print</span>(a.cls_var <span class="keyword">is</span> b.cls_var) <span class="comment"># Always True</span></span><br><span class="line"><span class="built_in">print</span>(a.local_var <span class="keyword">is</span> b.local_var) <span class="comment"># ?</span></span><br></pre></td></tr></table></figure>

<p>第二个 print 的结果是 True 还是 False 呢？或者说这里的两个 Foo 的实例的 local_var 是不是同一个呢?</p>
<p>答案是True。也就是两个变量在 C 语言这一层指向了同一个 CPython 的 IntergerObject。</p>
<p>另外一个更有趣的现象是发生在在不同的整数段使用 for 循环。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">function</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">new_function</span>():</span></span><br><span class="line">        start_time = timeit.default_timer()</span><br><span class="line">        function()</span><br><span class="line">        elapsed = timeit.default_timer() - start_time</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Function &quot;&#123;name&#125;&quot; took &#123;time&#125; seconds to complete.&#x27;</span>.<span class="built_in">format</span>(name=function.__name__, time=elapsed))</span><br><span class="line">    <span class="keyword">return</span> new_function()</span><br><span class="line"></span><br><span class="line">shift = <span class="number">10</span> ** <span class="number">5</span></span><br><span class="line">itertime = <span class="number">10</span> ** <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># small integer</span></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">small</span>():</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, itertime):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">256</span>):</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># big integer</span></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">big</span>():</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, itertime):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span> + shift, <span class="number">256</span> + shift):</span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>两个函数 small 和 big的执行时间是否相同呢？</p>
<p>答案是 big 的执行时间是 small 的两倍。是不是觉得很诡异。</p>
<p>这两个种情况出现的原因就是因为在 Python 代码里的 int 变量是在小整数池里的。尽管这看起来不可理喻，但是相信更多人都是小整数池的收益者，比如最常见的 从 0 到 10 的 for 循环，有了小整数池效率要比没有事有提升的。</p>
<h2 id="小整数池的实现"><a href="#小整数池的实现" class="headerlink" title="小整数池的实现"></a>小整数池的实现</h2><p>下面的实现来自于 Python 3.9。 </p>
<p>小整数池的 Buffer 是 PyThreadState 的一个属性，PyThreadState 是内部类型 _is 的一个别名，小整数池的定义在 pycore_interp.h 文件中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">is</span> &#123;</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">	PyLongObject* small_ints[_PY_NSMALLNEGINTS + _PY_NSMALLPOSINTS];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>小整数池的初始化在 Object/longobject.c 中，可以看到它跟随一个 Python 的 thread_state 一起初始化，对于 Python 的线程是一个 thread local 的对象。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span></span><br><span class="line">_PyLong_Init(PyThreadState *tstate)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (Py_ssize_t i=<span class="number">0</span>; i &lt; NSMALLNEGINTS + NSMALLPOSINTS; i++) &#123;</span><br><span class="line">        sdigit ival = (sdigit)i - NSMALLNEGINTS;</span><br><span class="line">        <span class="keyword">int</span> size = (ival &lt; <span class="number">0</span>) ? <span class="number">-1</span> : ((ival == <span class="number">0</span>) ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">		</span><br><span class="line">        PyLongObject *v = _PyLong_New(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (!v) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Py_SET_SIZE(v, size);</span><br><span class="line">        v-&gt;ob_digit[<span class="number">0</span>] = (digit)<span class="built_in">abs</span>(ival);</span><br><span class="line">		</span><br><span class="line">        tstate-&gt;interp-&gt;small_ints[i] = v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_Py_IsMainInterpreter(tstate)) &#123;</span><br><span class="line">        <span class="comment">/* initialize int_info */</span></span><br><span class="line">        <span class="keyword">if</span> (Int_InfoType.tp_name == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (PyStructSequence_InitType2(&amp;Int_InfoType, &amp;int_info_desc) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 longobject.c 中有从小整数池中获取对象的内部接口</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> PyObject *</span><br><span class="line">get_small_int(sdigit ival)</span><br><span class="line">&#123;</span><br><span class="line">    assert(IS_SMALL_INT(ival));</span><br><span class="line">    PyObject *v = __PyLong_GetSmallInt_internal(ival);</span><br><span class="line">    Py_INCREF(v);</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而这个接口在需要创建 int 类型的 PyObject 的时候会进行判断，判断是否可以避免分配出一个新的 PyLongObject。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PyObject *</span><br><span class="line">PyLong_FromLong(<span class="keyword">long</span> ival)</span><br><span class="line">&#123;</span><br><span class="line">    PyLongObject *v;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> abs_ival;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> t;  <span class="comment">/* unsigned so &gt;&gt; doesn&#x27;t propagate sign bit */</span></span><br><span class="line">    <span class="keyword">int</span> ndigits = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sign;</span><br><span class="line">	<span class="comment">// 如果是 small int</span></span><br><span class="line">    <span class="keyword">if</span> (IS_SMALL_INT(ival)) &#123;</span><br><span class="line">        <span class="keyword">return</span> get_small_int((sdigit)ival);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// 一种需要分配新的对象的情况</span></span><br><span class="line">    v = _PyLong_New(ndigits);</span><br><span class="line">    <span class="keyword">return</span> (PyObject*)v;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，小整数池的完美的封装到了 Python 的整数类型内，如果需要修改小整数池的大小，或者不使用它，完全不会破坏对外的接口，阅读 CPython 源码的时候也给我了一些启发。</p>
<h2 id="小整数池的意义"><a href="#小整数池的意义" class="headerlink" title="小整数池的意义"></a>小整数池的意义</h2><p>对象池是设计一个有动态内存分配的系统的常见优化方法，比如动态管理 TCP 连接的连接池，减少 worker 线程创建销毁开销的线程池。我的理解是，当频繁的创建销毁带来大量开销的时候，使用对象池就能够提升效率。</p>
<p>直觉上，我们写 Python 代码的时候，写这样的 for 循环应该非常常见。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> dim <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="comment"># 3d vector</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>这只是直觉上的一个判断，但是如果一个频繁使用的函数中有这样的一个代码，小整数池就能够提升一定的效率。</p>
<p>我暂时只能自己想到这一个，有空我试着翻一下 CPython 的提交记录看一下看一下其他有优化作用的场景。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2021/02/23/2021-02-23/" data-id="ckmivlo2c000xf8oggn6m18vt" data-title="[编程随记]CPython 中的小整数池的实现" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CPython-VM/" rel="tag">CPython, VM</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2021-02-02" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/02/2021-02-02/" class="article-date">
  <time class="dt-published" datetime="2021-02-02T08:57:41.000Z" itemprop="datePublished">2021-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/02/2021-02-02/">[C++]实现std::move和std::forward</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>尽管平时工作经常写C++，但是大多数对性能也没有敏感到用move和copy的结果是天上地下的情况。最近在工作中要改一个调用频繁的接口，于是用了一次 std::move，结果就写出问题了（我的C++知识在脑子里会发生LRU，稍微不用就容易忘）。在刚学C++的时候我至少看过至少3本不同的书，天天查的cppreference，都说它和内存操作无关。于是去翻一下源码自己实现一下加深其印象。</p>
<h3 id="move"><a href="#move" class="headerlink" title="move"></a>move</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp&gt;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type&amp;&amp; <span class="comment">//rvalue</span></span><br><span class="line"><span class="built_in">move</span>(_Tp&amp;&amp; <span class="keyword">__t</span>)<span class="keyword">noexcept</span> <span class="comment">// argument is a universal reference</span></span><br><span class="line">&#123; <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;<span class="keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type::type&amp;&amp;&gt;(<span class="keyword">__t</span>);&#125; <span class="comment">// convert to rvalue reference</span></span><br></pre></td></tr></table></figure>
<p>总结一下就是它把一个对象转成右值 (rvalue) 引用, 不会destruct掉被Move过的对象,所以,在一个复合数据结构中把一个部分给 move 后不要留着已经被 move 的对象，记得析构/释放掉免得后面忘记导致再次使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 忘记释放再次使用的情况</span><br><span class="line">vector&lt;int&gt; vec&#123;1,2,3,4&#125;;</span><br><span class="line">std::move(vec.begin(), vec.begin() + 1);</span><br><span class="line"></span><br><span class="line">for(auto &amp;&amp; n: vec) std::cout &lt;&lt; n; &#x2F;&#x2F; this is bad</span><br></pre></td></tr></table></figure>

<h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><p>std::forward 是用来实现完美转发的函数, 同样它也是只依靠类型转换实现的。<br><i>Effective Modern C++</i> 有完整的一个篇文章<b><a target="_blank" rel="noopener" href="https://github.com/kelthuzadx/EffectiveModernCppChinese/blob/master/5.RRefMovSemPerfForw/item25.md">例子</a></b>来讲什么时候需要用 std::forward ，尤其是函数的参数是一个 universal reference 时, 要正确的解决传入左值引用和传入右值引用两种情况。如果不想手动实现两个版本的话一定要使用 std::forward，如果这时断然地用std::move会导致传入的左值，在没有被察觉的情况下被move掉，如果函数外这个变量再被使用就出问题了。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp&gt;</span><br><span class="line"><span class="keyword">constexpr</span> _Tp&amp;&amp;</span><br><span class="line">forward(<span class="keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type&amp; <span class="keyword">__t</span>) <span class="keyword">noexcept</span> <span class="comment">// lvalue reference</span></span><br><span class="line">&#123; <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class="keyword">__t</span>);&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp&gt;</span><br><span class="line"><span class="keyword">constexpr</span> _Tp&amp;&amp;</span><br><span class="line">forward(<span class="keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type&amp;&amp; <span class="keyword">__t</span>) <span class="keyword">noexcept</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in"><span class="keyword">static_assert</span></span>(!std::is_lvalue_reference&lt;_Tp&gt;::value);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class="keyword">__t</span>);</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2021/02/02/2021-02-02/" data-id="ckmivlo2a000uf8oggghefphk" data-title="[C++]实现std::move和std::forward" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-STL/" rel="tag">C++, STL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2021-01-02" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/05/2021-01-02/" class="article-date">
  <time class="dt-published" datetime="2021-01-04T16:08:40.000Z" itemprop="datePublished">2021-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/05/2021-01-02/">[南来北往]京沪卧铺动车乘坐体验</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>12月份去北京找女朋友体验了一次从上海出发到北京的动车卧铺。买这趟车的最主要的原因是急着去，其一是这个时间点想买到当周周末的飞机票只能买全价票，其二是我真的不像坐接近6个小时从上海到北京。</p>
<p>在上车前，我是觉得动卧路上睡一觉能省下一晚的住宿费的，然而当我开始想睡的时候问题来了：除非是睡眠质量非常非常好的人，就算不考虑噪音也是很难在这种晃晃悠悠的车厢空间内安然入睡的，在去北京的路上我全程戴着降噪耳机，尽管如此也被吵醒了好多次。所以如果你们和我一样对睡眠环境有一丁点的要求，最好还是不要选择买动卧。</p>
<p>如果下次能够买到1400元左右的飞机票我觉得我是不会买动卧的了.最后上两张自己拍的照片吧.<br><img src="/images/IMG_5619.jpeg" alt="train"><br><img src="/images/IMG_5620.jpeg" alt="cabin"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2021/01/05/2021-01-02/" data-id="ckmivlo29000sf8og5c5hco8g" data-title="[南来北往]京沪卧铺动车乘坐体验" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/" rel="tag">Life</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2020-01-01" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/05/2020-01-01/" class="article-date">
  <time class="dt-published" datetime="2021-01-04T16:00:45.000Z" itemprop="datePublished">2021-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/05/2020-01-01/">[最近的日常]2020年末装机杂记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>先上配置</p>
<ul>
<li>AMD Ryzen 3600</li>
<li>ASUS B550 主板</li>
<li>16GB x 2 金士顿 HyerX</li>
<li>1T 希捷SSD</li>
<li>NVIDIA 1660s GPU</li>
</ul>
<p>我的需求</p>
<ul>
<li>个人编程开发 有Windows环境方便学习游戏引擎，同时有剩余的性能开虚拟机跑点服务 50%</li>
<li>2020前后2年的新游戏能够流畅游玩 50%</li>
</ul>
<p>总共的成本落在了6500块,加上手残自己没点亮又没时间就找了装机师傅又花了120块人工费.</p>
<p>这样一来我也顺便对手里所有的电子设备做一个功能划分和生命周期估算,毕竟最近突然多了一个十万块的预期支出.</p>
<ul>
<li>iPhone XR  收消息，等编译的时间摸鱼 计划在2021年冬天换成新一代的苹果的budget iPhone</li>
<li>MacBook Pro 2018 移动办公/非系统级的应用开发 计划在2022年换成 Apple Silicon的ARM版Air</li>
<li>组装台式机 主力开发，虚拟机，第二游戏平台 根据必要性进行扩展</li>
<li>PS4 slim 主要的玩游戏游戏平台。不过暂时还不着急买PS5，因为没有特别想玩的PS5独占，出Pro版或者出其他升级版之后考虑买升级版</li>
<li>潜在的支出：群晖 NAS 我曾经头脑一热在京东上曾经下单过，但是下单不到半天就冷静下来。对我来说它优先级较低，我房间也没有空间能够放 NAS。暂时通过稳定的网络服务比如， iCloud，购买付费的同步服务避免自己维护，有些事情免费的反而时最贵的。</li>
</ul>
<p>2021年3月2日更新：</p>
<p>现在想想还好12月份组了一台台式机，现在比特币的价格疯涨。同样买一块1660s已经要花接近3000快了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2021/01/05/2020-01-01/" data-id="ckmivlo1s0007f8og8lmgaio0" data-title="[最近的日常]2020年末装机杂记" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/" rel="tag">Life</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2020-11-24" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/23/2020-11-24/" class="article-date">
  <time class="dt-published" datetime="2020-11-22T16:36:13.000Z" itemprop="datePublished">2020-11-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/23/2020-11-24/">[我的推荐列表]动画推荐列表</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>这个POST用来记录我比较推荐的动画列表.<br>用blog记录喜欢的动画的想法启发自 <a target="_blank" rel="noopener" href="https://imtwice.cn/twices-anime-list/">https://imtwice.cn/twices-anime-list/</a> .</p>
<p>Tier 1</p>
<ul>
<li>星际牛仔</li>
<li>回转企鹅罐</li>
<li>红辣椒paprika</li>
<li>天气之子</li>
</ul>
<p>Tier 2</p>
<ul>
<li>机动战士高达Unicorn (OVA)</li>
<li>龙的牙医</li>
<li>千年女优</li>
<li>福音战士新剧场版 破</li>
<li>命运石之门</li>
<li>JOJO的奇妙冒险 不灭钻石</li>
<li>JOJO的奇妙冒险 星尘十字军</li>
<li>你的名字</li>
<li>狂赌之渊/ 狂赌之渊xx</li>
<li>Macross Plus OVA</li>
<li>烟草 kemurikusa</li>
<li>吹响!上低音号 第一季/第二季/剧场版/利兹与青鸟</li>
<li>来自新世界 (仅推荐动画作为入门然后去看小说)</li>
</ul>
<p>Tier 3</p>
<ul>
<li>福音战士新剧场版 序</li>
<li>福音战士新剧场版 </li>
<li>机动战士高达00 TV 第一季/第二季/剧场</li>
<li>Macross F (仅剧场版两部 虚空歌姬/恋离飞翼)</li>
<li>Aldnoah Zero (第一部)</li>
<li>JOJO的奇妙冒险 黄金之风</li>
<li>四月是你的谎言</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2020/11/23/2020-11-24/" data-id="ckmivlo27000qf8og0l2aayfs" data-title="[我的推荐列表]动画推荐列表" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Anime/" rel="tag">Anime</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2020-11-23" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/22/2020-11-23/" class="article-date">
  <time class="dt-published" datetime="2020-11-22T15:47:32.000Z" itemprop="datePublished">2020-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/22/2020-11-23/">[文章备份][转载]如何排解政治性抑郁</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>原文作者: 邓艾艾艾<br>原文发布于: 微信公众号「雪豹樱桃」</p>
<p>如何排解政治性抑郁，这是我被问过次数最多的一个问题。</p>
<p>我本身也不是一个在情绪上很通坦的人，讲如何排解似乎也不太具有说服力，我会尝试在观测的经验上作一些纸面清谈。不过，人不可能绝对剥离自我存在对感受的支配，就算能做对所有的题目，明白一切的道理，进入那样的状态时，自由抽离的权利终究是临场失踪的。</p>
<p>我不知道这个词是为何而发明的，但我看到它后，无需任何解释，就立刻明白它的体验指向。有人说，这是近年来才有的集体心理现象，在“美好的旧日时光”里不会生发。这也许是因为，那时你只是个唱着“我们的祖国是花园”的小学生，有不关心、不知道所赠予的花园笑脸特权，在那美好时光的不显眼角落里，同样有着苦闷与不解的零余青年。</p>
<p>政治性抑郁伴随政治立场而生，主要来源于自身意识与环境的冲突，由此我以为可以分为两类，相对政治抑郁与绝对政治抑郁。前者是自己的政治立场与周围大部分人有差异所致，后者则是因为这个世界的绝对事实不符合自己政治立场的预期。</p>
<p>相对抑郁在缺乏多元性，主流思潮单调、强大且包容性较低的地方更易发生。譬如，如果大部分人都认为女人一定要生孩子，而同性恋是一种不正常行为，这时候，持不同观念的人在现实中就会变得相对孤立。但这种情况也较容易排解，因为他们其实并不对自己的立场有什么严重的怀疑，只是和应乏声，而生压抑。我以为，此时不必太过自我暗示身边人与自己的价值冲突，保持原则的相信，拒绝行为的干涉，在此之外可对周遭做世俗化处理，而去往更广阔的世界，例如网络上，寻求琴瑟的远方支持，并不是说要钻入信息茧房，而是少数派更要联合起来共振以保护自己不被宏大的波浪所淹没。</p>
<p>不上网，不看新闻，这是人们通常认为的逃避政治抑郁的办法，它可能对解决绝对抑郁有所帮助，但对于相对抑郁，即使封锁了稀星重露的连通，也依然要面对周围言之凿凿的口水，逃离是没有用的，不如互相发出声音与光芒。</p>
<p>至于绝对抑郁，我以为，在大环境不改变的现实里，无法解决，我们也无法苛求一个连自我都疲于照顾的人去改变世界。这时候，切断向世界的联系，逃到自我的深处躲避，或许是最无奈的通道。</p>
<p>世界会变好吗，这是绝对抑郁里最核心的问题，我不敢回答。</p>
<p>高中的时候，在语文课上学《面朝大海，春天花开》，老师讲，这是一首很温暖的、激励人心的诗，那时我并不了解海子，却总隐约觉得，“从明天起，做一个幸福的人”这句话里有一种难以言说的绝望。</p>
<p>我现在想，这不是一首关于温暖与幸福的诗，或许是温暖的，但不是阳光那样的温暖，是让其他绝望的人，晓得阳光照不到的地方，不仅只有他们那一处。</p>
<p>你毫不怀疑，如果你什么都不知道，大概会比现在快乐很多，但，你要为了这快乐而跳进深渊吗。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2020/11/22/2020-11-23/" data-id="ckmivlo26000of8og9bclazlj" data-title="[文章备份][转载]如何排解政治性抑郁" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BD%92%E6%A1%A3/" rel="tag">归档</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2020-10-15" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/16/2020-10-15/" class="article-date">
  <time class="dt-published" datetime="2020-10-16T05:42:16.000Z" itemprop="datePublished">2020-10-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/16/2020-10-15/">[工作笔记]分布式UID常见方案</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>游戏服务器在经历了长期的单体单进程之后，现代的MMO服务器为了伸缩性都设计成了分布式的设计。撇开较为新的不怎么 OOP 的 ECS 设计，大部分游戏程序都要把游戏中的道具、NPC、敌人、召唤物设计成对象，而这些对象在生成的时候也必须要有一个 UID，因此在拆分单体游戏服务器到分布式设计时，如何保证不同的 server 上的对象 UID 不会重复就是一个能够影响游戏玩法正确性的问题。同时，创建对象作为非常底层的 API 其效率也是非常需要考虑的一个优化点。</p>
<p>去年在工作中完整做了这一部分的内容，所以在这里写一下学到的东西和自己的思路用于记录。</p>
<h2 id="成为标准的设计：UUID"><a href="#成为标准的设计：UUID" class="headerlink" title="成为标准的设计：UUID"></a>成为标准的设计：UUID</h2><p>UUID 许多不同的版本的，基于时间、硬件地址、命名空间、随机数的都有，但是由于标准是128bit 整数构成的 32个十六进制数据字符串，所以除非项目达到这种规模不如拆解其中的设计方法定制自己的 UID 方案。</p>
<h2 id="直觉上的设计：MySQL-auto-increament-一把梭"><a href="#直觉上的设计：MySQL-auto-increament-一把梭" class="headerlink" title="直觉上的设计：MySQL auto_increament 一把梭"></a>直觉上的设计：MySQL auto_increament 一把梭</h2><ul>
<li>依赖于 counter</li>
</ul>
<p>MySQL 已经有了 auto_increment 这种设计，不如就直接建一张新表用来当作分布式 UID，然后所有的 node 甚至都不需要额外的添加网络通信，直接服用 MySQL 的连接就好了。大致写一下用 SQL 实现的的方式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `gen_id`;</span><br><span class="line">USE `gen_id`;</span><br><span class="line"></span><br><span class="line">DROPTABLE IF EXIST `id_list`;</span><br><span class="line"></span><br><span class="line">CREATE TABLE `id_list` (</span><br><span class="line">	`id` int() unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">	PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=42;</span><br></pre></td></tr></table></figure>

<p>这样的设计的问题是，我们无法忍受每次都要进行一次 SQL 查询，同时如果这时候 MySQL 发生了慢查询，UID 的赋值就会被卡住。</p>
<h2 id="成熟的设计1：Snowflake"><a href="#成熟的设计1：Snowflake" class="headerlink" title="成熟的设计1：Snowflake"></a>成熟的设计1：Snowflake</h2><ul>
<li>依赖时钟、counter 和机器编号</li>
</ul>
<p>Snowflake 是 Twitter 开源的一种分布式 UID 设计方案。它的 UID 的表现形式是一个 64-bit 的无符号整数，其设计大致如图。</p>
<p><img src="/images/snowflakes.png" alt="Snowflake"></p>
<ul>
<li>需要说明的是 10 bit 的节点id 编码实现时需要自己配置一下</li>
<li>12bit 的counter 保证了每个毫秒对于单台机器可以产生 2^12 个不重复的id，这个数量级对于一般的游戏服务端项目应该是够用了</li>
</ul>
<p>但是这种设计的问题就是，由于时间戳由于依赖 UID 生成器的时间，所以如果回拨时钟就会有发生 UID 重复的危险，不过这种情况可以在获取 UID 的更上层检测然后重新给予对象新的 UID来避免。</p>
<h2 id="成熟的设计2：MongoDB-ObjectID"><a href="#成熟的设计2：MongoDB-ObjectID" class="headerlink" title="成熟的设计2：MongoDB ObjectID"></a>成熟的设计2：MongoDB ObjectID</h2><ul>
<li>依赖时钟，随机数和 counter</li>
</ul>
<p>MongoDB 的 ObjectID 是一个 96bit 的整数，虽然 C++ 并没有自带的 128 位整数的实现，但是像 EABASE 这种库都是有现成的 128bit 整数库可以直接用的。</p>
<p><img src="/images/mongodb_objectid.png" alt="mongodb_objectid"></p>
<p>值得注意的是，MongoDB 所谓的 UID 只是把 UID 冲突缩小到了一个比较小的概率，因为 MongoDB 的 UID 的一部分是一个随机数，只不过这个随机数有 40bit 只有极少数情况下会发生碰撞，但理论上仍存在可能（详情可以去 Google 关键词：鸽巢原理，狄利克雷抽屉原理）。</p>
<p>尽管有理论上的缺陷，这种方案依然有它的明显的优势，就是完全不依赖与任何的一个中心结点，完全依靠 node 自己生成。这种方式也比较类似 MAC 抵制，只要一个路由器内不存在两个 MAC 地址相同的设备，就不用担心组网冲突；类比就是，只要一组游戏服务器内不发生 UID 冲突，我们就没必要考虑 node 数量级特别大的情况。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>由于合规性所以最后我们的设计不方便直接在这里展开讲，不过大致上就是基于这几种方案做一个缝合怪。比较重要的就是 UID 必须要由 node 自己生成，而不是每次去访问某个中心服务，UID 是要关连到游戏核心游玩的系统，设计的时候一定要考虑到效率。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] <a target="_blank" rel="noopener" href="https://www.mongodb.com/blog/post/generating-globally-unique-identifiers-for-use-with-mongodb">Generating Globally Unique Identifiers for use with MongoDB, MongoDB Blog</a></p>
<p>[2] <a target="_blank" rel="noopener" href="https://sanyuesha.com/2019/03/11/ticket-server/">发号器设计漫谈, 三月沙</a></p>
<p>[3] <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc4122">RFC 4122 - A Universally Unique IDentifier (UUID) URN Namespace (ietf.org)</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2020/10/16/2020-10-15/" data-id="ckmivlo25000lf8og3hrlbn36" data-title="[工作笔记]分布式UID常见方案" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UID-Work/" rel="tag">UID, Work</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2020-08-16" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/16/2020-08-16/" class="article-date">
  <time class="dt-published" datetime="2020-08-16T11:20:24.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/16/2020-08-16/">[最近的日常]成为了游戏服务器程序员</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="最近在干什么"><a href="#最近在干什么" class="headerlink" title="最近在干什么"></a>最近在干什么</h2><p>距离上一篇博客的发布日期已经过去好久了，中间我也想过要不要写点东西发出来。工作之后学到一些东西，但是又没时间梳理语言。还是尽可能的写点东西锻炼一下自己的表达能力。</p>
<p>今年4月初正式去了一家规模还算可以的游戏公司入职，入职之后看了三套网络游戏的服务器代码，其中一套是现在自己仍然在维护的一个线上项目，也就是我现在上班的日常工作。</p>
<h2 id="入职以来在做什么"><a href="#入职以来在做什么" class="headerlink" title="入职以来在做什么"></a>入职以来在做什么</h2><p>首先我还再在继续学C++，因为 C++ 真的是包罗万象。</p>
<p>要驾驭好 C++ 并不简单，在掌握基本语法之后至少要学不少 idiom ， 比如至少要看过著名的 <i>Effective C++</i>， 才能避免各种让人头大的未定义行为，将 C++ 开发的性能优势尽可能的发挥出来。</p>
<p>其次就是一些熟悉一些网络游戏服务器的设计架构了，相对而言并不是很难。</p>
<h2 id="工作的内容是怎样的"><a href="#工作的内容是怎样的" class="headerlink" title="工作的内容是怎样的"></a>工作的内容是怎样的</h2><p>写游戏逻辑是游戏公司服务器程序员做的最多的一项工作，这种工作就像互联网公司一样是无穷无尽的 CRUD，时间久了，写多了就自然而然会对着感到无趣。尤其是面对历史包袱导致的屎山代码， 就仿佛未来的我对着我这篇不成熟的文章， 恨不得穿越到屏幕的另一侧锤原来的作者。</p>
<p>游戏的开发流程可以用版本作为一个标准单位。版本初期，首先策划头脑风暴想好策划案，然后交给程序来实现，开发的过程中程序也会不断找策划确认需求的细节。完工后验收项目的基本玩法，再交给QA去测试一些边界情况和线上的兼容性。QA 反馈完所有的 Bug 并且尽数修复后，一个版本也就完工准备发布了。</p>
<h2 id="游戏服务器和Web服务器有什么区别"><a href="#游戏服务器和Web服务器有什么区别" class="headerlink" title="游戏服务器和Web服务器有什么区别"></a>游戏服务器和Web服务器有什么区别</h2><p>非要从本质上讲的话没区别，就像云风前辈的 skynet 游戏服务器框架也可以用在其他的服务上一样。因为游戏是模拟现实生活的，游戏的商城也是简易版的现实的电商网站。至于不同的游戏类型，MMORPG ，放置类游戏，卡牌游戏，其架构也是百花齐放，不存在所谓的「最好的游戏服务器架构」。</p>
<p>游戏服务器里大量使用数据驱动的开发方式，大量的功能都抽象成游戏组件供策划完成下一步的内容产出。比如一个副本可以通过excel配置里面的出现的怪物的id/ 数量/ 等级， 然后在另一份怪物的配置中通过配置 lua 脚本/ 行为树/ 状态机配置怪物的行动，而怪物又对应到另一张表里配置可能掉落的道具。因此，修改这些配置的时候，并不需要彻底的停服，只需要让服务器重新加载一遍配置文件就可以完成更新。</p>
<h2 id="关于自己技术的发展规划"><a href="#关于自己技术的发展规划" class="headerlink" title="关于自己技术的发展规划"></a>关于自己技术的发展规划</h2><p>其实之前这个部分不是「发展规划」，现在看之前写的那个部分有点无病呻吟，于是果断删掉写一个更加实际的话题。  </p>
<p>坦白讲，中国游戏行业的换皮现象很严重，现在的一些服务器也是祖传且换皮多次的，技术上的求稳也使整体的技术较为落后。这一点主要在服务器上尤为明显，而客户端的技术迭代欣欣向荣，每年都有更有趣的技术出现，每年 GDC 都能看到很多有趣的 talk 。所以尽管工作中主要做服务器，但是我也会抽出时间复习一下在城大学的图形学然后去学习一下游戏引擎的使用和设计。毕竟，谁没有梦想自己做一款大家认可好玩的游戏呢？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.senevan.com/2020/08/16/2020-08-16/" data-id="ckmivlo23000kf8ogfb4j84pg" data-title="[最近的日常]成为了游戏服务器程序员" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/" rel="tag">Life</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anime/" rel="tag">Anime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-STL/" rel="tag">C++, STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-vcpkg-Notes/" rel="tag">C++, vcpkg, Notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPython-VM/" rel="tag">CPython, VM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CWE-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%EF%BC%8C%E8%BD%AC%E8%BD%BD/" rel="tag">CWE, 软件开发，转载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/" rel="tag">Life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Notes/" rel="tag">Notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UID-Work/" rel="tag">UID, Work</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BD%92%E6%A1%A3/" rel="tag">归档</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Anime/" style="font-size: 10px;">Anime</a> <a href="/tags/C-STL/" style="font-size: 10px;">C++, STL</a> <a href="/tags/C-vcpkg-Notes/" style="font-size: 10px;">C++, vcpkg, Notes</a> <a href="/tags/CPython-VM/" style="font-size: 10px;">CPython, VM</a> <a href="/tags/CWE-%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%EF%BC%8C%E8%BD%AC%E8%BD%BD/" style="font-size: 10px;">CWE, 软件开发，转载</a> <a href="/tags/LeetCode/" style="font-size: 10px;">LeetCode</a> <a href="/tags/Leetcode/" style="font-size: 15px;">Leetcode</a> <a href="/tags/Life/" style="font-size: 20px;">Life</a> <a href="/tags/Notes/" style="font-size: 20px;">Notes</a> <a href="/tags/UID-Work/" style="font-size: 10px;">UID, Work</a> <a href="/tags/%E5%BD%92%E6%A1%A3/" style="font-size: 10px;">归档</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/21/2021-03-21/">[转载归档]2020年最危险的软件缺陷</a>
          </li>
        
          <li>
            <a href="/2021/02/26/2021-02-26/">[开发环境]切换到vcpkg</a>
          </li>
        
          <li>
            <a href="/2021/02/23/2021-02-23/">[编程随记]CPython 中的小整数池的实现</a>
          </li>
        
          <li>
            <a href="/2021/02/02/2021-02-02/">[C++]实现std::move和std::forward</a>
          </li>
        
          <li>
            <a href="/2021/01/05/2021-01-02/">[南来北往]京沪卧铺动车乘坐体验</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Komoriii<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/About-Me" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>